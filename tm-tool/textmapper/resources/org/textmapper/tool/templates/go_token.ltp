${template main-}
${file 'token.go'-}
${call go.header-}
${call token-}
${end-}
${end}

${template token-}
package ${opts.lang}

import (
	"fmt"
)

// Token is an enum of all terminal symbols of the ${opts.lang} language.
type Token int

// Token values.
const (
${if !opts.reportInvalidTokens-}
	INVALIDTOKEN Token = -2
${end-}
	UNAVAILABLE Token = -1
	EOI Token = iota

${for i in [1, syntax.terminals - 1]-}
	${syntax.symbols[i]->tokenName()}${if syntax.symbols[i].isConstant()} // ${util.escape(syntax.symbols[i].getConstantValue())}${end}
${end-}

	NumTokens
)

var tokenStr = [...]string{
	"EOI",

${for i in [1, syntax.terminals - 1]-}
	"${util.escape(syntax.symbols[i].isConstant() ? util.escape(syntax.symbols[i].getConstantValue()) : syntax.symbols[i].id)}",
${end-}
}

func (tok Token) String() string {
	if tok >= 0 && int(tok) < len(tokenStr) {
		return tokenStr[tok]
	}
${if !opts.reportInvalidTokens-}
	if tok == INVALIDTOKEN {
		return "INVALID"
	}
${end-}
	return fmt.Sprintf("token(%d)", tok)
}
${end}

${cached query tokenName() = self.id->go.escapeGoReserved()}